<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Nightingale Diagnostic Lab</title> 
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script> 
    <style> 
        :root { 
            --primary-color: #2A5C82; 
            --secondary-color: #5BA4E6; 
            --background: #f8f9fa; 
            --text-color: #2c3e50; 
        } 

        body { 
            background: var(--background); 
            color: var(--text-color); 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        } 

        .container { 
            max-width: 800px; 
            margin: 2rem auto; 
            padding: 20px; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
        } 

        .header { 
            text-align: center; 
            margin-bottom: 2rem; 
        } 

        .header h1 { 
            color: var(--primary-color); 
        } 

        .input-group { 
            margin-bottom: 1rem; 
        } 

        input, button { 
            width: 100%; 
            padding: 10px; 
            margin-top: 5px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
        } 

        button { 
            background: var(--primary-color); 
            color: white; 
            cursor: pointer; 
        } 

        .data-table { 
            width: 100%; 
            margin-top: 2rem; 
            border-collapse: collapse; 
        } 

        .data-table th, .data-table td { 
            padding: 10px; 
            border: 1px solid #ddd; 
        } 

        .data-table th { 
            background: var(--primary-color); 
            color: white; 
        } 

        .total-row { 
            font-weight: bold; 
        } 

        .print-header { 
            display: none; 
            text-align: center; 
            margin-bottom: 2rem; 
        } 

        @media print { 
            .print-header { 
                display: block; 
                color: var(--primary-color); 
                font-size: 24px; 
            } 
            button, .input-group { 
                display: none; 
            } 
        } 
    </style> 
</head> 
<body> 
    <div class="container"> 
        <div class="header"> 
            <h1>NIGHTANGLE DIAGNOSTIC LAB</h1> 
            <p>Advanced Diagnostic Solutions</p> 
        </div> 

        <div class="input-group"> 
            <input type="text" id="invoiceNumber" placeholder="Invoice Number" required> 
        </div> 
        <div class="input-group"> 
            <input type="text" id="security" placeholder="Security Code" required> 
        </div> 
        <div class="input-group"> 
            <input type="number" id="amount" placeholder="Amount" required> 
        </div> 
        <div class="input-group"> 
            <input type="text" id="labId" placeholder="Lab ID" required> 
        </div> 
        <button onclick="addRecord()">Add Record</button> 

        <div class="print-header"> 
            <h3>PATHOLOGY BILLINGS</h3> 
        </div> 
        <table class="data-table"> 
            <thead> 
                <tr> 
                    <th>Invoice No</th> 
                    <th>Security</th> 
                    <th>Amount</th> 
                    <th>Lab ID</th> 
                </tr> 
            </thead> 
            <tbody id="tableBody"></tbody> 
            <tfoot id="totalRow"></tfoot> 
        </table> 

        <div style="margin-top: 1.5rem;"> 
            <button onclick="window.print()" style="background: #27ae60;">Print Report</button> 
        </div> 
    </div> 

    <script> 
        const firebaseConfig = { 
            apiKey: "AIzaSyB_TKTqU9DkMbcNn_nu1Qfor0hSpQOALxc", 
            authDomain: "myprojec-597b9.firebaseapp.com", 
            databaseURL: "https://myprojec-597b9-default-rtdb.firebaseio.com", 
            projectId: "myprojec-597b9", 
            storageBucket: "myprojec-597b9.firebasestorage.app", 
            messagingSenderId: "900659439226", 
            appId: "1:900659439226:web:0c72aadcd219935b73bdc3", 
            measurementId: "G-2S6B4YGYFX" 
        }; 

        firebase.initializeApp(firebaseConfig); 
        const db = firebase.firestore(); 
        let totalAmount = 0; 

        function addRecord() { 
            const invoiceNumber = document.getElementById('invoiceNumber').value; 
            const security = document.getElementById('security').value; 
            const amount = parseFloat(document.getElementById('amount').value); 
            const labId = document.getElementById('labId').value; 

            db.collection("invoices").add({ 
                invoiceNumber: invoiceNumber, 
                security: security, 
                amount: Math.round(amount), 
                labId: labId, 
                timestamp: firebase.firestore.FieldValue.serverTimestamp() 
            }).then(() => { 
                addRowToTable(invoiceNumber, security, Math.round(amount), labId); 
                document.getElementById('invoiceForm').reset(); 
                document.getElementById('invoiceNumber').focus(); 
            }).catch((error) => { 
                console.error("Error adding document: ", error); 
                alert("ডেটা সেভ করতে সমস্যা হয়েছে!"); 
            }); 
        } 

        function addRowToTable(invoiceNumber, security, amount, labId) { 
            const tableBody = document.getElementById('tableBody'); 
            const newRow = document.createElement('tr'); 
            newRow.innerHTML = ` 
                <td>${invoiceNumber}</td> 
                <td>${security}</td> 
                <td>${amount}</td> 
                <td>${labId}</td> 
            `; 
            tableBody.appendChild(newRow); 

            totalAmount += amount; 
            document.getElementById('totalRow').innerHTML = ` 
                <tr class="total-row"> 
                    <td colspan="2">Total Amount</td> 
                    <td>${Math.round(totalAmount)}</td> 
                    <td></td> 
                </tr> 
            `; 
        } 
    </script> 
</body> 
</html>